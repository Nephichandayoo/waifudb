[
  {
    "name": "Infiltration",
    "events": [
      {
        "name": "Security Patrol",
        "description": "Patroli keamanan mendekat!",
        "resolutions": [
          {
            "condition": "room.players.some(p => room.roles[p] === 'Scout')",
            "effect": "room.players.forEach(p => room.heist.health[p] -= 5); 'Scout melihat patroli dan tim bersembunyi. Semua kehilangan 5 HP karena stres';",
            "reward": 100
          },
          {
            "condition": "true",
            "effect": "room.players.forEach(p => room.heist.health[p] -= 15); 'Tim ketahuan dan harus bertarung. Semua kehilangan 15 HP';",
            "reward": 0
          }
        ]
      },
      {
        "name": "Locked Door",
        "description": "Kamu menemukan pintu terkunci.",
        "resolutions": [
          {
            "condition": "room.players.some(p => room.roles[p] === 'Demolitionist' && db.get_user(p).ctower.inventory.includes('C4'))",
            "effect": "const demo = room.players.find(p => room.roles[p] === 'Demolitionist' && db.get_user(p).ctower.inventory.includes('C4')); db.get_user(demo).ctower.inventory = db.get_user(demo).ctower.inventory.filter(i => i !== 'C4'); 'Demolitionist meledakkan pintu dengan C4';",
            "reward": 150
          },
          {
            "condition": "room.players.some(p => room.roles[p] === 'Hacker' && db.get_user(p).ctower.inventory.includes('Laptop'))",
            "effect": "'Hacker membobol keamanan pintu dengan Laptop';",
            "reward": 120
          },
          {
            "condition": "true",
            "effect": "room.players.forEach(p => room.heist.health[p] -= 10); 'Tim memaksa pintu terbuka, kehilangan 10 HP masing-masing';",
            "reward": 0
          }
        ]
      },
      {
        "name": "Negotiation Opportunity",
        "description": "Kamu bertemu dengan penjaga yang tampaknya bisa diajak bicara.",
        "resolutions": [
          {
            "condition": "room.players.some(p => room.roles[p] === 'Negotiator')",
            "effect": "'Negotiator berbicara dengan penjaga dan berhasil meyakinkannya untuk membiarkan tim lewat';",
            "reward": 200
          },
          {
            "condition": "true",
            "effect": "room.players.forEach(p => room.heist.health[p] -= 10); 'Tim gagal bernegosiasi dan harus bertarung. Semua kehilangan 10 HP';",
            "reward": 0
          }
        ]
      }
    ]
  },
  {
    "name": "Reaching Target",
    "events": [
      {
        "name": "Alarm System",
        "description": "Sistem alarm terdeteksi!",
        "resolutions": [
          {
            "condition": "room.players.some(p => room.roles[p] === 'Hacker')",
            "effect": "room.heist.atkBonus = (room.heist.atkBonus || 0) + 10; 'Hacker menonaktifkan alarm. Bonus +10 ATK akhir';",
            "reward": 150
          },
          {
            "condition": "true",
            "effect": "room.players.forEach(p => room.heist.health[p] -= 10); 'Alarm berbunyi, keamanan meningkat. Semua kehilangan 10 HP';",
            "reward": 0
          }
        ]
      },
      {
        "name": "Complex Layout",
        "description": "Tata letak bangunan sangat rumit.",
        "resolutions": [
          {
            "condition": "room.players.some(p => room.roles[p] === 'Mastermind')",
            "effect": "room.heist.atkBonus = (room.heist.atkBonus || 0) + 15; 'Mastermind merencanakan rute yang efisien. Bonus +15 ATK akhir';",
            "reward": 180
          },
          {
            "condition": "true",
            "effect": "room.players.forEach(p => room.heist.health[p] -= 5); 'Tim tersesat sebentar, kehilangan 5 HP masing-masing';",
            "reward": 0
          }
        ]
      }
    ]
  },
  {
    "name": "Executing Heist",
    "events": [
      {
        "name": "Guard Confrontation",
        "description": "Penjaga menghadang tim!",
        "resolutions": [
          {
            "condition": "room.players.some(p => room.roles[p] === 'Negotiator')",
            "effect": "'Negotiator bernegosiasi dengan penjaga, tim lolos tanpa masalah';",
            "reward": 250
          },
          {
            "condition": "true",
            "effect": "room.players.forEach(p => room.heist.health[p] -= 15); 'Tim bertarung dengan penjaga. Semua kehilangan 15 HP';",
            "reward": 0
          }
        ]
      },
      {
        "name": "Trap Detection",
        "description": "Ada kemungkinan jebakan di area ini.",
        "resolutions": [
          {
            "condition": "room.players.some(p => room.roles[p] === 'Scout')",
            "effect": "'Scout mendeteksi dan menonaktifkan jebakan';",
            "reward": 200
          },
          {
            "condition": "true",
            "effect": "room.players.forEach(p => room.heist.health[p] -= 20); 'Tim terkena jebakan, semua kehilangan 20 HP';",
            "reward": 0
          }
        ]
      }
    ]
  },
  {
    "name": "Escape",
    "events": [
      {
        "name": "SWAT Arrival",
        "description": "Tim SWAT tiba-tiba datang!",
        "resolutions": [
          {
            "condition": "room.players.some(p => room.roles[p] === 'Scout')",
            "effect": "room.players.forEach(p => room.heist.health[p] -= 10); 'Scout memandu tim lewat pintu rahasia. Semua kehilangan 10 HP';",
            "reward": 150
          },
          {
            "condition": "room.players.some(p => db.get_user(p).ctower.inventory.includes('Smoke'))",
            "effect": "const userWithSmoke = room.players.find(p => db.get_user(p).ctower.inventory.includes('Smoke')); db.get_user(userWithSmoke).ctower.inventory = db.get_user(userWithSmoke).ctower.inventory.filter(i => i !== 'Smoke'); room.players.forEach(p => room.heist.health[p] -= 15); 'Seseorang melempar Smoke Grenade untuk kabur. Semua kehilangan 15 HP';",
            "reward": 100
          },
          {
            "condition": "true",
            "effect": "room.players.forEach(p => room.heist.health[p] -= 20); 'Tim kewalahan oleh SWAT. Semua kehilangan 20 HP';",
            "reward": 0
          }
        ]
      }
    ]
  }
]